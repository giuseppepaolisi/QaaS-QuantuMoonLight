# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger:
- master #elenco di rami per cui il push attiva un esecuzione

stages:
#    - stage: 'BuildStage'
#      displayName: 'Build Stage'
    
#    - stage: 'TestStage'
#      displayName: 'Test Stage'

    - stage: "DeployStage"
      displayName: "Deploy Stage"
      jobs:
        - job: 
          steps:
            - script: |
                echo "Start..."
                cd ~/git-projects/QaaS-QuantuMoonLight
                echo "starting deployment script run"
                source activate quantumoonlight
                echo "Ambiente attivato"
                cd ..
                bash run-flask-server.sh
                echo "Servizio attivo"
                sleep 30
